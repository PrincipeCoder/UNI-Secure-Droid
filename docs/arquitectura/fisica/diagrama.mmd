sequenceDiagram
    actor U as Usuario
    participant B as Navegador
    participant API as API Layer (FastAPI)
    participant US as UploadService
    participant MQ as JobQueue (RabbitMQ)
    participant SW1 as StaticWorker 1
    participant SW2 as StaticWorker 2
    participant DW1 as DynamicWorker 1
    participant DW2 as DynamicWorker 2
    participant MS as ModelService
    participant RS as ReportService
    participant OS as ObjectStore (S3/MinIO)
    participant MDB as MetadataDB

    U->>B: Interactúa con la aplicación
    B->>API: Solicita análisis y resultados

    API->>US: Sube APK
    US->>MQ: Encola trabajo

    MQ->>SW1: Asigna trabajo
    MQ->>SW2: Asigna trabajo
    SW1->>MS: Ejecuta análisis estático
    SW2->>MS: Ejecuta análisis estático

    API->>MQ: Encola trabajo de análisis dinámico
    MQ->>DW1: Asigna trabajo dinámico
    MQ->>DW2: Asigna trabajo dinámico
    DW1->>MS: Ejecuta análisis dinámico
    DW2->>MS: Ejecuta análisis dinámico

    MS->>OS: Almacena artefactos
    MS->>MDB: Almacena resultados

    RS->>OS: Recupera artefactos
    RS->>MDB: Genera reporte
    RS->>API: Retorna resultados

